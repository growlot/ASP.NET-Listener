<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   namespace="AMSLLC.Listener.Common.Model"
                   assembly="AMSLLC.Listener.Common">

  <!-- Mappings for class 'Config' -->
  <class name="TransactionLog" table="TransactionLog" lazy="false">

    <!-- Identity mapping -->
    <id name="Id">
      <column name="TransactionLogId" />
      <generator class="native" />
    </id>

    <many-to-one  name="TransactionType"
                  class="TransactionType"
                  column="TransactionTypeId"
                  cascade="none"
                  fetch="join" />

    <many-to-one  name="TransactionStatus"
                  class="TransactionStatus"
                  column="TransactionStatusId"
                  cascade="none"
                  fetch="join" />

    <many-to-one  name="TransactionSource"
                  class="TransactionSource"
                  column="TransactionSourceId"
                  cascade="none"
                  fetch="join" />

    <many-to-one  name="Device"
                  class="Device"
                  column="DeviceId"
                  cascade="none"
                  fetch="join" />

    <many-to-one  name="DeviceTest"
                  class="DeviceTest"
                  column="DeviceTestId"
                  cascade="none"
                  fetch="join" />

    <many-to-one  name="Batch"
                  class="Batch"
                  column="BatchId"
                  cascade="none"
                  fetch="join" />

    <bag name="TransactionLogState" 
         cascade="delete-orphan" 
         fetch="join" >
      <key column="TransactionLogId" />
      <one-to-many class="TransactionLogState"/>
      
    </bag>

    <property name="TransactionStart" column="TransactionStart" />
    <property name="TransactionEnd" column="TransactionEnd" />
    <property name="Message" column="Message" />
    <property name="DebugInfo" column="DebugInfo" type="StringClob" />

  </class>

</hibernate-mapping>